(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{980:function(e,t,n){"use strict";n.r(t);var o=n(4),i=n(0),r=n(19),c=n(34),a=n.n(c),O=n(6),N=(n(15),3e3),E=2e3,u={RECONNECTING:window.translate("toast_bar_reconnecting"),RECONNECT_FAILED:window.translate("toast_bar_reconnect_failed"),ONLINE:window.translate("toast_bar_online"),OFFLINE:window.translate("toast_bar_offline"),RETRY:window.translate("toast_bar_retry"),RECONNECT:window.translate("offline_page_retry"),GEOLOCATION_DENIED:window.translate("geolocation_denied")},_=1,s=2,l=3,d=["ON_CANCEL_HIDE","ON_CANCEL_RECONNECT_TIMEOUT","ON_CHECK_NETWORK_STATUS","ON_HIDE","ON_HIDE_IN_FUTURE","ON_NETWORK_STATUS_CHANGE","ON_RECONNECT","ON_RECONNECT_FAILURE","ON_SHOW","ON_GEOLOCATION_DENIED","ON_GEOLOCATION_RESET"].reduce(function(e,t){return(e[t]=t)&&e},{}),C=n(1),T=("function"==typeof Symbol&&Symbol.iterator,{}),p=["class","toast-bar__message"],f=["type","button"],w=["id","js_toast_bar"];T.render=function(e){Object(i.elementOpen)("div","toast-bar",w,"class",Object(C.classes)({base:"toast-bar","toast-bar--hidden":!(null!=e.isShown&&""!==e.isShown&&e.isShown)})),Object(i.elementOpen)("p","o;g4e%'",p),Object(i.text)(null!=e.text&&""!==e.text?e.text:""),Object(i.elementClose)("p"),Object(i.elementOpenStart)("button","(f^)[aH",f,"class",Object(C.classes)({base:"toast-bar__action","is-hidden":!(null!=e.isButtonShown&&""!==e.isButtonShown&&e.isButtonShown)}));for(var t=0,n=Object(C.attrs)({onclick:null!=e.reconnect&&""!==e.reconnect?e.reconnect:""}),o=n.length;t<o;t+=2)Object(i.attr)(n[t],n[t+1]);Object(i.elementOpenEnd)(),Object(i.text)(null!=e.buttonText&&""!==e.buttonText?e.buttonText:window.translate("toast_bar_online")),Object(i.elementClose)("button"),Object(i.elementClose)("div")};var I=Object(O.mapProps)(function(e){var t=e.state;return{text:function(e){return e.reconnecting===s?u.RECONNECTING:e.reconnecting===l?u.RECONNECT_FAILED:e.isOnline?e.isGeolocationDenied?u.GEOLOCATION_DENIED:e.isOnline?u.ONLINE:void 0:u.OFFLINE}(t),buttonText:function(e){return e.reconnecting===l?u.RETRY:u.RECONNECT}(t),isButtonShown:function(e){return!1===e.isOnline&&e.reconnecting===_||e.reconnecting===l}(t),isShown:t.isShown,reconnect:t.reconnect}})(Object(o.createComponent)(function(e){return T.render(e)})),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},R={isShown:!1,isOnline:!0,reconnecting:_,hideTimeoutId:void 0,isGeolocationDenied:!1},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments[1],n=t.type,i=t.payload;switch(n){case o.RECEIVE_PROPS:return b({},e,i);case d.ON_SHOW:return b({},e,{isShown:!0});case d.ON_HIDE:return b({},e,{isShown:!1});case d.ON_HIDE_IN_FUTURE:return b({},e,{hideTimeoutId:i});case d.ON_NETWORK_STATUS_CHANGE:return b({},e,{isOnline:i,reconnecting:_});case d.ON_RECONNECT:return b({},e,{reconnecting:s,reconnectTimeoutId:i});case d.ON_CANCEL_RECONNECT:return b({},e,{reconnecting:_});case d.ON_RECONNECT_FAILURE:return b({},e,{reconnecting:l});case d.ON_GEOLOCATION_DENIED:return b({},e,{isGeolocationDenied:!0});case d.ON_GEOLOCATION_RESET:return b({},e,{isGeolocationDenied:!1});default:return e}},y={reconnect:function(){return{type:d.ON_RECONNECT}},checkNetworkStatus:function(){return{type:d.ON_CHECK_NETWORK_STATUS}},cancelHide:function(){return{type:d.ON_CANCEL_HIDE}},cancelReconnectTimeout:function(){return{type:d.ON_CANCEL_RECONNECT_TIMEOUT}},geolocationDenied:function(){return{type:d.ON_GEOLOCATION_DENIED}},geolocationReset:function(){return{type:d.ON_GEOLOCATION_RESET}}},h=Object(r.dispatchToState)(y),D=Object(O.compose)(Object(O.lifecycle)({componentDidMount:function(){var e=this.getState(),t=e.checkNetworkStatus,n=e.geolocationDenied;window.addEventListener("online",t),window.addEventListener("offline",t),window.addEventListener("geolocationDenied",n)},componentWillUnmount:function(){var e=this.getState(),t=e.checkNetworkStatus,n=e.cancelHide,o=e.geolocationDenied,i=e.geolocationReset;window.removeEventListener("online",t),window.removeEventListener("offline",t),window.removeEventListener("geolocationDenied",o),i(),n()}})),v={render:function(e){return Object(i.elementOpen)("div"),Object(i.component)(I,"toast-bar",{state:e}),Object(i.elementClose)("div")}},L=n(3),g=null,m=L.b,A=function(){g&&m("100:2316:5:295:"+new Date(Date.now()-g).getSeconds())},j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},H=function(e){return function(t){return function(n){(n.type===d.ON_HIDE_IN_FUTURE||n.type===d.ON_CANCEL_HIDE)&&clearTimeout(e.getState().hideTimeoutId),t(n)}}};var U=function(e){return function(t){return function(n){return function(e,t,n,o){if(n.type===d.ON_RECONNECT){var i=setTimeout(function(){e.dispatch({type:o?d.ON_CANCEL_RECONNECT:d.ON_RECONNECT_FAILURE})},E);return t(j({},n,{payload:j({},n.payload,{timeoutId:i})}))}"ON_CANCEL_RECONNECT_TIMEOUT"===n.type&&clearTimeout(e.getState().reconnectTimeoutId),t(n)}(e,t,n,navigator.onLine)}}};var G=function(e){return function(t){return function(n){return function(e,t,n,o){if(n.type===d.ON_CHECK_NETWORK_STATUS){if(!1===o)e.dispatch({type:d.ON_SHOW}),e.dispatch({type:d.ON_CANCEL_HIDE});else{var i=setTimeout(function(){e.dispatch({type:d.ON_HIDE})},N);e.dispatch({type:d.ON_HIDE_IN_FUTURE,payload:i})}e.dispatch({type:d.ON_NETWORK_STATUS_CHANGE,payload:o})}t(n)}(e,t,n,navigator.onLine)}}},F=function(e,t,n,o){return n.type===d.ON_RECONNECT_FAILURE&&m("100:2316:4"),n.type===d.ON_RECONNECT&&m("100:2316:3"),n.type===d.ON_CHECK_NETWORK_STATUS&&(o?(m("100:2316:2"),A()):(m("100:2316:1"),g=Date.now())),t(n)},W=function(e){return function(e){return function(t){return F(0,e,t,navigator.onLine)}}},K=function(e){return function(t){return function(n){if("ON_GEOLOCATION_DENIED"===n.type){e.dispatch({type:d.ON_SHOW});var o=setTimeout(function(){e.dispatch({type:d.ON_HIDE}),e.dispatch({type:d.ON_GEOLOCATION_RESET})},N);e.dispatch({type:d.ON_HIDE_IN_FUTURE,payload:o})}return t(n)}}};t.default=function(e){var t=[H,G,W,U,K];Object(o.render)(e,function(e){return D(Object(o.createComponent)(v,a()(S,h),r.applyMiddleware.apply(void 0,e)))}(t),{})}}}]);
//# sourceMappingURL=toast-bar.4af7639aa4f765d291e2.js.map